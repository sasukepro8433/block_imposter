<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Block Impostors</title>
<link rel="shortcut icon" href="logo.png" type="image/x-icon">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

  body {
    margin: 0;
    background-color: #0b0b0b;
    font-family: 'Press Start 2P', cursive;
    color: white;
    overflow: hidden;
  }

  body::before {
    content: "";
    position: fixed;
    top:0; left:0; right:0; bottom:0;
    background-image:
      linear-gradient(45deg, rgba(255,255,255,0.05) 25%, transparent 25%),
      linear-gradient(-45deg, rgba(255,255,255,0.05) 25%, transparent 25%),
      linear-gradient(45deg, transparent 75%, rgba(255,255,255,0.05) 75%),
      linear-gradient(-45deg, transparent 75%, rgba(255,255,255,0.05) 75%);
    background-size: 40px 40px;
    background-position: 0 0, 0 20px, 20px -20px, -20px 0px;
    pointer-events: none;
    z-index: 0;
  }

  #menu {
    position: fixed;
    top: 50%;
@@ -50,15 +65,19 @@
    cursor: pointer;
    letter-spacing: 1px;
    text-shadow: 1px 1px 0 #000;
    transition: background 0.3s, color 0.3s, border-color 0.3s;
  }

  #menu input {
    width: 100%;
    padding: 10px;
    margin-top: 10px;
    font-family: 'Press Start 2P', cursive;
    font-size: 12px;
    text-align: center;
  #menu button:hover {
    background: #3af;
    color: #222;
    border-color: #0af;
  }

  #menu button:active {
    background: #1a1a1a;
    color: #1af;
    border-color: #09f;
  }

  #discordLogin {
@@ -67,6 +86,10 @@
    color: white;
  }

  #discordLogin:hover {
    background: #4854d4;
  }

  canvas {
    display: block;
    margin: 0 auto;
@@ -76,27 +99,37 @@
    z-index: 1;
  }

  #argentCounter, #boutique {
  #userInfo {
    margin-top: 10px;
    font-size: 12px;
    z-index: 20;
    color: #3af;
    background: #111;
    border: 2px solid #3af;
    padding: 10px;
    color: #ccc;
  }

  #boutique {
    display: none;
    position: fixed;
    top: 20px;
    right: 20px;
    width: 260px;
    background: #111;
    border: 3px solid #3af;
    padding: 20px;
    width: 240px;
    box-shadow: 0 0 10px #3af;
    font-size: 12px;
    text-align: left;
    z-index: 15;
    display: none;
  }

  #boutique h2 {
    margin-top: 0;
    font-size: 14px;
    color: #3af;
  }

  #boutique .item {
    margin: 10px 0;
    background: #222;
    padding: 10px;
    background: #222;
    border: 1px solid #555;
  }

@@ -108,143 +141,206 @@
    font-size: 10px;
    padding: 5px 8px;
    cursor: pointer;
    margin-left: 10px;
  }

  #argentCounter {
    position: fixed;
    top: 20px;
    left: 20px;
    background: #111;
    padding: 10px 15px;
    border: 2px solid #3af;
    font-size: 12px;
    color: #3af;
    z-index: 20;
  }

  #skinCodeBox {
    margin-top: 10px;
  }

  #skinCodeInput {
    width: 90%;
    padding: 10px;
    margin-bottom: 10px;
    font-size: 12px;
  }

  #skinCodeBox button {
    padding: 10px;
    width: 100%;
    background: #3af;
    color: #000;
    border: none;
    font-weight: bold;
    cursor: pointer;
  }
</style>
</head>
<body>

<div id="menu">
  <h1>Block Impostors</h1>
  <input id="skinCodeInput" placeholder="Code de skin...">
  <button onclick="verifierCode()">Valider</button>
  <button id="startBtn">Jouer</button>
  <button id="optionsBtn">Options</button>
  <button id="shopBtn">Boutique</button>
  <button id="discordLogin">Connexion Discord</button>
  <button id="quitBtn">Quitter</button>
  <div id="userInfo"></div>

  <!-- Champ pour entrer le code secret -->
  <div id="skinCodeBox">
    <input type="text" id="skinCodeInput" placeholder="Code secret de skin" />
    <button onclick="verifierCode()">Valider le code</button>
  </div>
</div>

<div id="argentCounter">üí∞ Pi√®ces : <span id="argentValeur">1000</span></div>

<div id="boutique">
  <h2>Boutique</h2>
  <div class="item">üëï Skin Daquavis ‚Äî Gratuit <button onclick="acheterItem(0)">Acheter</button></div>
  <div class="item">ü¶∏ Skin Susy ‚Äî 200 pi√®ces <button onclick="acheterItem(200)">Acheter</button></div>
  <div class="item">üé© Chapeau Ultra ‚Äî 500 pi√®ces <button onclick="acheterItem(500, 'chapeau-ultra.png')">Acheter</button></div>
  <div class="item">üé© Chapeau Ultra ‚Äî 500 pi√®ces <button onclick="acheterItem(500)">Acheter</button></div>
  <div class="item">ü§† Chapeau Cowboy ‚Äî 45‚ÄØ‚Ç¨ <button onclick="acheterItem(-1)">Acheter</button></div>
  <div class="item">üï¥Ô∏è Costume (apport√© par toi-m√™me) ‚Äî 1000‚ÄØ‚Ç¨ <button onclick="acheterItem(-1)">Acheter</button></div>
</div>

<canvas id="gameCanvas" width="800" height="600"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

const player = {
  x: 100,
  y: 100,
  speed: 3,
  image: new Image(),
  hatImage: null
};

const keys = {};
document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

function movePlayer() {
  if (keys["ArrowUp"] || keys["z"]) player.y -= player.speed;
  if (keys["ArrowDown"] || keys["s"]) player.y += player.speed;
  if (keys["ArrowLeft"] || keys["q"]) player.x -= player.speed;
  if (keys["ArrowRight"] || keys["d"]) player.x += player.speed;
}

function gameLoop() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  movePlayer();
  ctx.drawImage(player.image, player.x, player.y, 48, 64);
  if (player.hatImage) ctx.drawImage(player.hatImage, player.x, player.y - 32, 48, 32);
  requestAnimationFrame(gameLoop);
}

const skinSauvegarde = localStorage.getItem("skinActuel");
if (skinSauvegarde) player.image.src = skinSauvegarde;
else player.image.src = "daquavis.png";

const chapeauSauvegarde = localStorage.getItem("chapeauActuel");
if (chapeauSauvegarde) {
  player.hatImage = new Image();
  player.hatImage.src = chapeauSauvegarde;
}

gameLoop();

function verifierCode() {
  const code = document.getElementById("skinCodeInput").value.trim().toLowerCase();
  const codesSkins = {
    "bird orange": "birdorange.png",
    "employe2025": "employe_skin.png",
    "12345": "dream.png"
  const canvas = document.getElementById("gameCanvas");
  const ctx = canvas.getContext("2d");

  const player = {
    x: 100,
    y: 100,
    speed: 3,
    image: new Image()
  };

  if (code === "ttt") {
    const chapeauDev = new Image();
    chapeauDev.src = "chapeau-dev.png";
    player.hatImage = chapeauDev;
    localStorage.setItem("chapeauActuel", "chapeau-dev.png");
    alert("üé© Chapeau d√©veloppeur activ√© !");
    return;
  // Appliquer le skin sauvegard√©
  const skinSauvegarde = localStorage.getItem("skinActuel");
  player.image.src = skinSauvegarde || "daquavis.png";

  const keys = {};
  document.addEventListener("keydown", e => keys[e.key] = true);
  document.addEventListener("keyup", e => keys[e.key] = false);

  function movePlayer() {
    if (keys["ArrowUp"] || keys["z"]) player.y -= player.speed;
    if (keys["ArrowDown"] || keys["s"]) player.y += player.speed;
    if (keys["ArrowLeft"] || keys["q"]) player.x -= player.speed;
    if (keys["ArrowRight"] || keys["d"]) player.x += player.speed;
  }

  if (codesSkins[code]) {
    player.image.src = codesSkins[code];
    localStorage.setItem("skinActuel", codesSkins[code]);
    alert("‚úÖ Skin activ√© !");
  } else {
    alert("‚ùå Code inconnu.");
  function gameLoop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    movePlayer();
    ctx.drawImage(player.image, player.x, player.y, 48, 64);
    requestAnimationFrame(gameLoop);
  }
}

const menu = document.getElementById('menu');
const startBtn = document.getElementById('startBtn');
const shopBtn = document.getElementById('shopBtn');
const quitBtn = document.getElementById('quitBtn');
const boutique = document.getElementById('boutique');
  gameLoop();

startBtn.onclick = () => menu.style.display = 'none';
shopBtn.onclick = () => boutique.style.display = boutique.style.display === 'none' ? 'block' : 'none';
quitBtn.onclick = () => alert("Merci d'avoir jou√© !");
  const menu = document.getElementById('menu');
  const startBtn = document.getElementById('startBtn');
  const optionsBtn = document.getElementById('optionsBtn');
  const quitBtn = document.getElementById('quitBtn');
  const shopBtn = document.getElementById('shopBtn');
  const boutique = document.getElementById('boutique');

  startBtn.addEventListener('click', () => {
    menu.style.display = 'none';
  });

  optionsBtn.addEventListener('click', () => {
    alert('Options √† venir...');
  });

  quitBtn.addEventListener('click', () => {
    alert('Merci d\'avoir jou√© !');
  });

  shopBtn.addEventListener('click', () => {
    boutique.style.display = boutique.style.display === 'none' ? 'block' : 'none';
  });

document.getElementById("discordLogin").onclick = () => {
  const clientId = "1381020944994144286";
  const redirectUri = window.location.origin + window.location.pathname;
  const oauthUrl = https://discord.com/api/oauth2/authorize?client_id=${clientId}&redirect_uri=${encodeURIComponent(redirectUri)}&response_type=token&scope=identify;
  window.location.href = oauthUrl;
};

let argent = 1000;
function majArgent() {
  document.getElementById("argentValeur").textContent = argent;
}

function acheterItem(prix, chapeauPath) {
  if (prix === -1) {
    alert("Cet objet doit √™tre achet√© en dehors du jeu.");
    return;
  }
  if (argent >= prix) {
    argent -= prix;
    majArgent();
    alert("Achat effectu√© !");
    if (chapeauPath) {
      player.hatImage = new Image();
      player.hatImage.src = chapeauPath;
      localStorage.setItem("chapeauActuel", chapeauPath);

  document.getElementById("discordLogin").addEventListener("click", () => {
    window.location.href = oauthUrl;
  });

  window.addEventListener("load", () => {
    const hash = window.location.hash;
    if (hash.includes("access_token")) {
      const params = new URLSearchParams(hash.substring(1));
      const accessToken = params.get("access_token");

      fetch("https://discord.com/api/users/@me", {
        headers: {
          Authorization: Bearer ${accessToken}
        }
      })
      .then(res => res.json())
      .then(user => {
        document.getElementById("userInfo").textContent = Connect√© : ${user.username}#${user.discriminator};
        document.getElementById("discordLogin").style.display = "none";
      })
      .catch(err => {
        console.error("Erreur Discord:", err);
      });
    }
  } else {
    alert("Pas assez de pi√®ces !");
  });

  // Gestion argent et achats
  let argent = 1000;

  function majArgent() {
    document.getElementById("argentValeur").textContent = argent;
  }
}

majArgent();
  function acheterItem(prix) {
    if (prix === -1) {
      alert("Cet objet doit √™tre achet√© en dehors du jeu.");
      return;
    }

    if (argent >= prix) {
      argent -= prix;
      majArgent();
      alert("Achat effectu√© !");
    } else {
      alert("Pas assez de pi√®ces !");
    }
  }

  majArgent();

  // V√©rification du code de skin
  function verifierCode() {
    const code = document.getElementById("skinCodeInput").value.trim().toLowerCase();

    const codesSkins = {
      "bird orange": "devlopeur.png",
      "skin susy": "daquavis.png",
      "12345": "dream.png"
    };

    if (codesSkins[code]) {
      const nouveauSkin = codesSkins[code];
      localStorage.setItem("skinActuel", nouveauSkin);
      player.image.src = nouveauSkin;
      alert("‚úÖ Skin activ√© !");
    } else {
      alert("‚ùå Code inconnu.");
    }
  }
</script>
